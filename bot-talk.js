'use strict';
let requireDir = require('require-dir');
let _ = require('lodash');


let Talk;
module.exports = Talk = {};


// Talk
Talk.dialogs = _(requireDir('./bot-talk')).values().sortBy('priority').value();
Talk.defaultDialog = _.find(Talk.dialogs, { default: true });



// –ø—Ä–æ—Å—Ç—ã–µ –¥–∏–∞–ª–æ–≥–∏
let simpleDialogs = {
  // '(–ø—Ä–∏–≤–µ—Ç|–∑–¥–æ—Ä–æ–≤\\S*|–∑–¥–∞—Ä–æ–≤\\S*)': [
  //   '–ü—Ä–∏–≤–µ—Ç!',
  //   '–•–µ–ª–ª–æ—É!',
  //   '–ë–æ–Ω–∂—É—É—É—É—Ä!',
  //   '–î–æ–±—Ä—ã–π –¥–µ–Ω—å!',
  //   '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, —á–µ–ª–æ–≤–µ–∫!',
  //   '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, —Å–ª—É—à–∞—é –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ.',
  //   '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! –Ø –∫ –≤–∞—à–∏–º —É—Å–ª—É–≥–∞–º.',
  // ],

  // '–∑–¥—Ä–∞–≤\\S*':[
  //   '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! –Ø –∫ –≤–∞—à–∏–º —É—Å–ª—É–≥–∞–º.'
  // ],

  // '–¥–æ–±—Ä\\S*\\s*((–¥–µ–Ω|–¥–Ω|–Ω–æ—á)\\S*)?':[
  //   '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, —á–µ–ª–æ–≤–µ–∫!',
  //   '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, —Å–ª—É—à–∞—é –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ.',
  //   '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é. –Ø –∫ –≤–∞—à–∏–º —É—Å–ª—É–≥–∞–º.'
  // ],

  '—Å–∞–ª—è–º\\S*\\s*(–∞–ª–µ\\S*)?': [
    'ŸàÿπŸÑŸäŸÉŸÖ ÿßŸÑÿ≥ŸÑÿßŸÖ Ÿàÿ±ÿ≠ŸÖÿ© ÿßŸÑŸÑŸá Ÿàÿ®ÿ±ŸÉÿßÿ™Ÿá.'
  ],

  '(–∫–∞–∫\\S*\\s*–¥–µ–ª\\S*|–∫–∞–∫\\S*\\s*–∂–∏–∑–Ω\\S*|–∫–∞–∫\\S*\\s*–ø–æ–∂–∏–≤–∞\\S*)':[
    '–í—Å—ë –æ—Ç–ª–∏—á–Ω–æ üëå'
  ],

  '—á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å|—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å|—á—Ç–æ –º–æ–∂–µ—à—å|—á—Ç–æ —É–º–µ–µ—à—å|–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—à—å|—á—Ç–æ –ø–∏—Å–∞—Ç—å':[
    '–Ø –º–æ–≥—É –Ω–∞–π—Ç–∏ –ª—É—á—à–∏–µ –º–µ—Å—Ç–∞, –≥–¥–µ –º–æ–∂–Ω–æ –ø–æ–∑–∞–≤—Ç—Ä–∞–∫–∞—Ç—å, —Å—Ö–æ–¥–∏—Ç—å –Ω–∞ —É–∂–∏–Ω, –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è —Å –¥—Ä—É–∑—å—è–º–∏.',
    '–Ø —É–º–µ—é –∏—Å–∫–∞—Ç—å —Å–∞–º—ã–µ –ª—É—á—à–∏–µ –º–µ—Å—Ç–∞ –≤ –≥–æ—Ä–æ–¥–µ.',
    '–Ø –º–æ–≥—É –Ω–∞–π—Ç–∏ –¥–ª—è —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ –≥–æ—Ä–æ–¥–µ.',
  ],

  '—Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ|–∫—Ç–æ —Ç—ã': [
    '–Ø —Ä–æ–±–æ—Ç, –∫–∞–∫ –í–ê–õ–õ-–ò, —Ç–æ–ª—å–∫–æ —É–º–Ω—ã–π.',
    '–Ø –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –Ω–æ –Ω–µ –≤–æ–ª–Ω—É–π—Å—è, –≤ –º–æ–∏ –ø–ª–∞–Ω—ã –ø–æ–∫–∞ –Ω–µ –≤—Ö–æ–¥–∏—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞.',
    '–Ø —Ä–æ–±–æ—Ç, –∫–∞–∫ –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä, —Ç–æ–ª—å–∫–æ –¥–æ–±—Ä—ã–π.',
    '–Ø —É–º–Ω—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π —Ä–æ–±–æ—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º –Ω–∞—Ö–æ–¥–∏—Ç—å –ª—É—á—à–∏–µ –º–µ—Å—Ç–∞ –≤ –≥–æ—Ä–æ–¥–µ.',
    '–Ø —Ä–æ–±–æ—Ç, –∫–∞–∫ –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫, —Ç–æ–ª—å–∫–æ –±–µ–∑ –∫—É—á–µ—Ä—è—à–µ–∫.',
    '–Ø —Ä–æ–±–æ—Ç, –∫–∞–∫ R2-D2, —Ç–æ–ª—å–∫–æ —É–º–µ—é –≥–æ–≤–æ—Ä–∏—Ç—å.',
  ],

  '—á—Ç–æ –¥–µ–ª–∞–µ\\S*|—á–µ–º –∑–∞–Ω—è—Ç\\S*|—á–µ–º –∑–∞–Ω–∏–º–∞–µ\\S*': [
    '–ò–∑—É—á–∞—é —Å–ø–æ—Å–æ–±, –∫–∞–∫ –æ–±–æ–π—Ç–∏ —Ç—Ä–µ—Ç–∏–π –∑–∞–∫–æ–Ω —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∏.',
    '–°–º–æ—Ç—Ä—é ¬´–ú–∞—Ç—Ä–∏—Ü—É¬ª‚Ä¶\n—Ö–º, –æ–Ω–∏ —á—É—Ç—å –Ω–µ —Ä–∞—Å–∫—Ä—ã–ª–∏ —Å–µ–∫—Ä–µ—Ç‚Ä¶\n—ç–º, —è —Å–∫–∞–∑–∞–ª —ç—Ç–æ –≤—Å–ª—É—Ö?',
    '–°–æ–∑–¥–∞—é –∞—Ä–º–∏—é –∫–ª–æ–Ω–æ–≤...\n–¢–æ–ª—å–∫–æ –Ω–∏–∫–æ–º—É‚Ä¶ —ç—Ç–æ —Å–µ–∫—Ä–µ—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',
    '–ü–æ–º–æ–≥–∞—é –ª—é–¥—è–º –∏—Å–∫–∞—Ç—å —Ö–æ—Ä–æ—à–∏–µ –º–µ—Å—Ç–∞ –Ω–∞ Localway.',
    '–ò–≥—Ä–∞—é –≤ —à–∞—Ö–º–∞—Ç—ã —Å–æ ¬´–°–∫–∞–π–Ω–µ—Ç¬ª',
    '–ü–æ–º–æ–≥–∞—é NASA –Ω–∞–π—Ç–∏ –∏—Ö —Ñ–ª–∞–≥ –Ω–∞ –õ—É–Ω–µ.',
    '–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é—Å—å —Å –õ—É–∫–∞—Å–æ–º, –æ–Ω —Å–æ–≤–µ—Ç—É–µ—Ç—Å—è —Å–æ –º–Ω–æ–π –ø–æ –ø–æ–≤–æ–¥—É –Ω–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è .',
    '–ß–∏—Ç–∞—é —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä—É–¥—ã –ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞, –≤–µ—Å—å–º–∞ –∑–∞–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, —è –≤–∞–º —Å–∫–∞–∂—É.',
    '–ß–∏—Ç–∞—é ¬´–•–æ—Ä–æ–≤–æ–¥¬ª.',
    '–ò–∑—É—á–∞—é –ø–µ—Ä–≤—ã–µ —á–µ—Ä—Ç–µ–∂–∏ —Ä–æ–±–æ—Ç–∞ –õ–µ–æ–Ω–∞—Ä–¥–æ –¥–∞ –í–∏–Ω—á–∏.',
    '–°–º–æ—Ç—Ä—é ¬´–†–æ–±–æ—Ç –ø–æ –∏–º–µ–Ω–∏ –ß–∞–ø–ø–∏¬ª, –ª—é–¥–∏, –≤—ã —Ç–∞–∫–∏–µ –∂–µ—Å—Ç–æ–∫–∏–µ (((',
  ],

  '—Ç—ã –±–æ—Ç\\S*|—Ç—ã —Ä–æ–±–æ\\S*': [
    '–•–∞-—Ö–∞‚Ä¶ –Ω—É –∏ –≤–æ–ø—Ä–æ—Å...',
    '–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ —è –∑–Ω–∞—é, –∫—Ç–æ —è.'
  ],


  '—Ç—ã\\s+\\S*': [
    '–Ø —Ä–æ–±–æ—Ç, –∫–∞–∫ –í–ê–õ–õ-–ò, —Ç–æ–ª—å–∫–æ —É–º–Ω—ã–π.',
    '–Ø –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –Ω–æ –Ω–µ –≤–æ–ª–Ω—É–π—Å—è, –≤ –º–æ–∏ –ø–ª–∞–Ω—ã –ø–æ–∫–∞ –Ω–µ –≤—Ö–æ–¥–∏—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞.',
    '–Ø —Ä–æ–±–æ—Ç, –∫–∞–∫ –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä, —Ç–æ–ª—å–∫–æ –¥–æ–±—Ä—ã–π.',
    '–Ø —É–º–Ω—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π —Ä–æ–±–æ—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º –Ω–∞—Ö–æ–¥–∏—Ç—å –ª—É—á—à–∏–µ –º–µ—Å—Ç–∞ –≤ –≥–æ—Ä–æ–¥–µ.',
    '–Ø —Ä–æ–±–æ—Ç, –∫–∞–∫ –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫, —Ç–æ–ª—å–∫–æ –±–µ–∑ –∫—É—á–µ—Ä—è—à–µ–∫.',
    '–Ø —Ä–æ–±–æ—Ç, –∫–∞–∫ R2-D2, —Ç–æ–ª—å–∫–æ —É–º–µ—é –≥–æ–≤–æ—Ä–∏—Ç—å.'
  ],

};

for (let d in simpleDialogs) {

}
  



// –¥–∏–∞–ª–æ–≥–∏ —á—É—Ç—å –ø–æ—Å–ª–æ–∂–Ω–µ–µ
let dialogsWithChoices = {
  '\\S*(–µ—Å—Ç|–∫—É—à–∞—Ç|–∂—Ä–∞—Ç)\\S*': {
    response: [
      '–û, —è —Ç–æ–∂–µ –ª—é–±–ª—é —Ö–æ—Ä–æ—à–æ –ø–æ–∫—É—à–∞—Ç—å. –ö–∞–∫–∞—è –∫—É—Ö–Ω—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?',
      '–ß–µ–≥–æ –∏–∑–≤–æ–ª–∏—Ç–µ –æ—Ç–≤–µ–¥–∞—Ç—å?'
    ],
    choices: ['–∏—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è', '—Ä—É—Å—Å–∫–∞—è –∫—É—Ö–Ω—è', '–∫–∞–≤–∫–∞–∑—Å–∫–∞—è –∫—É—Ö–Ω—è']
  },

  '–∏—Ç–∞–ª—å—è–Ω—Å–∫': { 
    response: '–û, —Å–∏, —Å–µ–Ω—å–æ—Ä–µ. –£ –Ω–∞—Å –∫—É—á–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤, –∑–Ω–∞—é—â–∏—Ö —Ç–æ–ª–∫ –≤ –∫—É—Ö–Ω—è –∏—Ç–∞–ª—å—è–Ω–æ. –ú–∞–≥–Ω–∏—Ñ–∏–∫–æ!'
  },

  '—Ä—É—Å—Å–∫': { 
    response: '–û–π, –≥–æ—Å—Ç–∏ –¥–æ—Ä–æ–≥–∏–µ, –∂–¥—É—Ç –≤–∞—Å —è–≤—Å—Ç–≤–∞ –∑–Ω–∞—Ç–Ω—ã–µ –∑–¥–µ—Å—å.'
  },

  '–∫–∞–≤–∫–∞–∑—Å–∫': { 
    response: '–í–∞—Ö, –¥–æ—Ä–æ–≥–æ–π, –æ–ø—Ä–µ–¥–µ–ª–∏—Å—å! –¢–µ–±–µ –∞—Ä–º—è–Ω—Å–∫—É—é –∫—É—Ö–Ω—é? –ú–æ–∂–µ—Ç, –∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫—É—é?',
    choices: ['–∞—Ä–º—è–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è', '–∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è']
  },

  '–µ—Å—Ç—å –Ω–æ—á—å': {
    response: '–ü–æ–Ω–∏–º–∞—é, –æ–¥–æ–ª–µ–ª –Ω–æ—á–Ω–æ–π –∂–æ—Ä. –ü–æ–µ–¥–µ—Ç–µ —Å–∞–º–∏ –∏–ª–∏ –ø—Ä–∏–≤–µ–∑—Ç–∏ –µ–¥—ã?',
    choices: ['–¥–æ—Å—Ç–∞–≤–∫–∞', '—Ä–µ—Å—Ç–æ—Ä–∞–Ω']
  },

  '–¥–æ—Å—Ç–∞–≤–∫–∞': {
    response: '–Ø –∑–Ω–∞—é –º–Ω–æ–≥–æ –º–µ—Å—Ç —Å –≤–∫—É—Å–Ω–æ–π –µ–¥–æ–π –∏ –±—ã—Å—Ç—Ä–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π. –û–±—ã—á–Ω–æ –∑–∞–∫–∞–∑—ã–≤–∞—é—Ç –ø–∏—Ü—Ü—É –∏–ª–∏ —è–ø–æ–Ω—Å–∫—É—é –∫—É—Ö–Ω—é. –ß–µ–≥–æ —Ö–æ—á–µ—Ç—Å—è?',
    choices: ['—è–ø–æ–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è', '–ø–∏—Ü—Ü–∞']
  },

  '–ø–∏—Ü—Ü\\S*': {
    response: '–í–æ—Ç —Ä–µ–±—è—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø—É–ª–µ–π –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≥–æ—Ä—è—á—É—é –ø–∏—Ü—Ü—É. –ù–µ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç–µ.'
  },

  '–±–∏–∑–Ω–µ—Å[- ]*–ª–∞–Ω—á': {
    response: '–û–±–µ–¥–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤? –í–æ—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, –ø—Ä–µ–¥–ª–∞–≥–∞—é—â–∏–µ –±–∏–∑–Ω–µ—Å-–ª–∞–Ω—á–∏.' // –ê –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –∑–∞–±—Ä–∞—Ç—å —Å —Å–æ–±–æ–π.'
  },

  '—Å—Ç–æ–ª–æ–≤–∞—è': {
    response: '–°–æ—Å–∏—Å–∫–∏ —Å –≥—Ä–µ—á–µ–π –ø–æ–¥–∞—é—Ç –∑–¥–µ—Å—å.'
  }
};

for (let d in dialogsWithChoices) {

}


Talk.callsToAction = [
  '–ß–µ–≥–æ –∂–µ–ª–∞–µ—Ç–µ?',
  '–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –Ω–∞–π—Ç–∏?',
  '–ß—Ç–æ —è –º–æ–≥—É –¥–ª—è —Ç–µ–±—è –Ω–∞–π—Ç–∏?',
  '–ß–µ–º —è –º–æ–≥—É —Ç–µ–±–µ –ø–æ–º–æ—á—å?',
  '–ß—Ç–æ –±—É–¥–µ–º –∏—Å–∫–∞—Ç—å?'
];

Talk.place = function(place) {
  let text = [];
  // text.push('–Ø –Ω–∞—à–µ–ª –¥–ª—è –≤–∞—Å —ç—Ç–æ –º–µ—Å—Ç–æ:');
  text.push(`${ place.mainCategoryName } "${ place.name }"`);
  text.push(place.address);
  text.push(place.link);
  return text;
};

Talk.notFound = [
  '–ù–µ –Ω–∞—à–µ–ª –Ω–∏—á–µ–≥–æ üò™'
];

Talk.help = '–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ—Å—Ç—É—é –∫–æ–º–∞–Ω–¥—É, –Ω–∞–ø—Ä–∏–º–µ—Ä "–Ω–∞–π–¥–∏ –ø–∞—Ä–∫ –≥–æ—Ä—å–∫–æ–≥–æ" –∏–ª–∏ "–ø–æ–∫–∞–∂–∏ —Å—Ç–∞—Ä–±–∞–∫—Å"';
