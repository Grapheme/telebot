'use strict';
let requireDir = require('require-dir');
let _ = require('lodash');


let Talk;
module.exports = Talk = {};

Talk.dialogs = _.values(requireDir('./bot-talk'));

// add other

Talk.dialogs = _.sortBy(Talk.dialogs, 'priority');
Talk.defaultDialog = _.find(Talk.dialogs, { default: true });



// –¥–∏–∞–ª–æ–≥–∏ —á—É—Ç—å –ø–æ—Å–ª–æ–∂–Ω–µ–µ
let dialogsWithChoices = {
  '\\S*(–µ—Å—Ç|–∫—É—à–∞—Ç|–∂—Ä–∞—Ç)\\S*': {
    response: [
      '–û, —è —Ç–æ–∂–µ –ª—é–±–ª—é —Ö–æ—Ä–æ—à–æ –ø–æ–∫—É—à–∞—Ç—å. –ö–∞–∫–∞—è –∫—É—Ö–Ω—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?',
      '–ß–µ–≥–æ –∏–∑–≤–æ–ª–∏—Ç–µ –æ—Ç–≤–µ–¥–∞—Ç—å?'
    ],
    choices: ['–∏—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è', '—Ä—É—Å—Å–∫–∞—è –∫—É—Ö–Ω—è', '–∫–∞–≤–∫–∞–∑—Å–∫–∞—è –∫—É—Ö–Ω—è']
  },

  '–∏—Ç–∞–ª—å—è–Ω—Å–∫': { 
    response: '–û, —Å–∏, —Å–µ–Ω—å–æ—Ä–µ. –£ –Ω–∞—Å –∫—É—á–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤, –∑–Ω–∞—é—â–∏—Ö —Ç–æ–ª–∫ –≤ –∫—É—Ö–Ω—è –∏—Ç–∞–ª—å—è–Ω–æ. –ú–∞–≥–Ω–∏—Ñ–∏–∫–æ!'
  },

  '—Ä—É—Å—Å–∫': { 
    response: '–û–π, –≥–æ—Å—Ç–∏ –¥–æ—Ä–æ–≥–∏–µ, –∂–¥—É—Ç –≤–∞—Å —è–≤—Å—Ç–≤–∞ –∑–Ω–∞—Ç–Ω—ã–µ –∑–¥–µ—Å—å.'
  },

  '–∫–∞–≤–∫–∞–∑—Å–∫': { 
    response: '–í–∞—Ö, –¥–æ—Ä–æ–≥–æ–π, –æ–ø—Ä–µ–¥–µ–ª–∏—Å—å! –¢–µ–±–µ –∞—Ä–º—è–Ω—Å–∫—É—é –∫—É—Ö–Ω—é? –ú–æ–∂–µ—Ç, –∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫—É—é?',
    choices: ['–∞—Ä–º—è–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è', '–∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è']
  },

  '–µ—Å—Ç—å –Ω–æ—á—å': {
    response: '–ü–æ–Ω–∏–º–∞—é, –æ–¥–æ–ª–µ–ª –Ω–æ—á–Ω–æ–π –∂–æ—Ä. –ü–æ–µ–¥–µ—Ç–µ —Å–∞–º–∏ –∏–ª–∏ –ø—Ä–∏–≤–µ–∑—Ç–∏ –µ–¥—ã?',
    choices: ['–¥–æ—Å—Ç–∞–≤–∫–∞', '—Ä–µ—Å—Ç–æ—Ä–∞–Ω']
  },

  '–¥–æ—Å—Ç–∞–≤–∫–∞': {
    response: '–Ø –∑–Ω–∞—é –º–Ω–æ–≥–æ –º–µ—Å—Ç —Å –≤–∫—É—Å–Ω–æ–π –µ–¥–æ–π –∏ –±—ã—Å—Ç—Ä–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π. –û–±—ã—á–Ω–æ –∑–∞–∫–∞–∑—ã–≤–∞—é—Ç –ø–∏—Ü—Ü—É –∏–ª–∏ —è–ø–æ–Ω—Å–∫—É—é –∫—É—Ö–Ω—é. –ß–µ–≥–æ —Ö–æ—á–µ—Ç—Å—è?',
    choices: ['—è–ø–æ–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è', '–ø–∏—Ü—Ü–∞']
  },

  '–ø–∏—Ü—Ü\\S*': {
    response: '–í–æ—Ç —Ä–µ–±—è—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø—É–ª–µ–π –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≥–æ—Ä—è—á—É—é –ø–∏—Ü—Ü—É. –ù–µ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç–µ.'
  },

  '–±–∏–∑–Ω–µ—Å[- ]*–ª–∞–Ω—á': {
    response: '–û–±–µ–¥–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤? –í–æ—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, –ø—Ä–µ–¥–ª–∞–≥–∞—é—â–∏–µ –±–∏–∑–Ω–µ—Å-–ª–∞–Ω—á–∏.' // –ê –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –∑–∞–±—Ä–∞—Ç—å —Å —Å–æ–±–æ–π.'
  },

  '—Å—Ç–æ–ª–æ–≤–∞—è': {
    response: '–°–æ—Å–∏—Å–∫–∏ —Å –≥—Ä–µ—á–µ–π –ø–æ–¥–∞—é—Ç –∑–¥–µ—Å—å.'
  }
};




Talk.callsToAction = [
  '–ß–µ–≥–æ –∂–µ–ª–∞–µ—Ç–µ?',
  '–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –Ω–∞–π—Ç–∏?',
  '–ß—Ç–æ —è –º–æ–≥—É –¥–ª—è —Ç–µ–±—è –Ω–∞–π—Ç–∏?',
  '–ß–µ–º —è –º–æ–≥—É —Ç–µ–±–µ –ø–æ–º–æ—á—å?',
  '–ß—Ç–æ –±—É–¥–µ–º –∏—Å–∫–∞—Ç—å?'
];

Talk.place = function(place) {
  let text = [];
  // text.push('–Ø –Ω–∞—à–µ–ª –¥–ª—è –≤–∞—Å —ç—Ç–æ –º–µ—Å—Ç–æ:');
  text.push(`${ place.mainCategoryName } "${ place.name }"`);
  text.push(place.address);
  text.push(place.link);
  return text;
};

Talk.notFound = [
  '–ù–µ –Ω–∞—à–µ–ª –Ω–∏—á–µ–≥–æ üò™'
];

Talk.help = '–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ—Å—Ç—É—é –∫–æ–º–∞–Ω–¥—É, –Ω–∞–ø—Ä–∏–º–µ—Ä "–Ω–∞–π–¥–∏ –ø–∞—Ä–∫ –≥–æ—Ä—å–∫–æ–≥–æ" –∏–ª–∏ "–ø–æ–∫–∞–∂–∏ —Å—Ç–∞—Ä–±–∞–∫—Å"';
